{"version":3,"sources":["webpack:///C:/Users/admin/Documents/HBuilderProjects/newf6/components/canvas/canvas.vue?bda4","webpack:///C:/Users/admin/Documents/HBuilderProjects/newf6/components/canvas/canvas.vue?540e","webpack:///C:/Users/admin/Documents/HBuilderProjects/newf6/components/canvas/canvas.vue?c076","webpack:///C:/Users/admin/Documents/HBuilderProjects/newf6/components/canvas/canvas.vue?878c","uni-app:///components/canvas/canvas.vue"],"names":["name","computed","styleCanvas","finalRatio","Math","props","styles","type","default","width","height","onInit","onTouchEvent","onError","pixelRatio","mounted","query","select","fields","node","size","exec","console","canvas","left","top","ctx","rect","container","renderer","methods","onTouch","modifyEvent","touchEvent"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;;;AAGrD;AACgM;AAChM,gBAAgB,yMAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAuuB,CAAgB,4vBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBCsB3vB;EACAA;EACAC;IACAC;MACA;IACA;IACAC;MACA,qCACAC,oCACA;IACA;EACA;EACAC;IACAC;MACAC;MACAC;IACA;IACAC;MACAF;MACAC;IACA;IACAE;MACAH;MACAC;IACA;IACAG;MACAJ;MACAC;QACA;MACA;IACA;IACAI;MACAL;MACAC;QACA;MACA;IACA;IACAK;MACAN;MACAC;QACA;MACA;IACA;IACAM;MACAP;MACAC;IACA;EACA;EACAO;IAAA;IAuCA;IACAC,MACAC,qBACAC;MACAC;MACAC;IACA,GACAC;MACAC;MACA;MACAC;MACAA;MACA;QACAd;QACAC;QACAc;QACAC;MACA;MACA;MACA;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EAGA;EACAC;IACAC;MACA;MACA;MACA;QACAC;MACA;MAEA;QACAA;MACA;MACA;IACA;EACA;AACA;AAAA;AAEA;EACAC;EACAA;EACAA;EACAA;AACA,C","file":"components/canvas/canvas.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./canvas.vue?vue&type=template&id=0a531d44&\"\nvar renderjs\nimport script from \"./canvas.vue?vue&type=script&lang=js&\"\nexport * from \"./canvas.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/canvas/canvas.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./canvas.vue?vue&type=template&id=0a531d44&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./canvas.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.4.08.2024040127\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./canvas.vue?vue&type=script&lang=js&\"","<template>\r\n  <!-- #ifdef H5 -->\r\n  <view ref=\"f6-canvess\"> </view>\r\n  <!-- #endif -->\r\n  <!-- #ifndef H5 -->\r\n  <canvas\r\n    ref=\"f6-canvess\"\r\n    name=\"f6-canvas\"\r\n    type=\"2d\"\r\n    canvas-id=\"f6-canvas\"\r\n    id=\"f6-canvas\"\r\n    :width=\"width * finalRatio\"\r\n    :height=\"height * finalRatio\"\r\n    :style=\"styleCanvas\"\r\n    @touchstart=\"onTouch\"\r\n    @touchmove=\"onTouch\"\r\n    @touchend=\"onTouch\"\r\n  ></canvas>\r\n  <!-- #endif -->\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"f6-canvas\",\r\n  computed: {\r\n    styleCanvas() {\r\n      return `width: ${this.$props.width}px; height: ${this.$props.height}px; ${this.$props.styles}`;\r\n    },\r\n    finalRatio() {\r\n      return this.$props.pixelRatio >= 1\r\n        ? Math.ceil(this.$props.pixelRatio)\r\n        : 1;\r\n    },\r\n  },\r\n  props: {\r\n    styles: {\r\n      type: String,\r\n      default: \"\",\r\n    },\r\n    width: {\r\n      type: Number,\r\n      default: 100,\r\n    },\r\n    height: {\r\n      type: Number,\r\n      default: 100,\r\n    },\r\n    onInit: {\r\n      type: Function,\r\n      default: function () {\r\n        return () => {};\r\n      },\r\n    },\r\n    onTouchEvent: {\r\n      type: Function,\r\n      default: function () {\r\n        return () => {};\r\n      },\r\n    },\r\n    onError: {\r\n      type: Function,\r\n      default: function () {\r\n        return () => {};\r\n      },\r\n    },\r\n    pixelRatio: {\r\n      type: Number,\r\n      default: 1,\r\n    },\r\n  },\r\n  mounted: function (e) {\r\n    // #ifdef H5\r\n    const container = this.$el;\r\n    this.rect = null;\r\n    this.ctx = null;\r\n\r\n    this.$emit(\"onInit\", {\r\n      ctx: this.ctx,\r\n      rect: this.rect,\r\n      container: container,\r\n      renderer: \"h5\",\r\n    });\r\n    // #endif\r\n\r\n    // #ifdef MP-ALIPAY\r\n    my.createSelectorQuery()\r\n      .select(\"#f6-canvas\")\r\n      .boundingClientRect()\r\n      .exec((ret) => {\r\n        my._createCanvas({\r\n          id: \"f6-canvas\",\r\n          success: (canvas) => {\r\n            this.$emit(\"onInit\", {\r\n              ctx: canvas.getContext(\"2d\"),\r\n              rect: {\r\n                width: ret[0].width,\r\n                height: ret[0].height,\r\n                left: ret[0].left,\r\n                top: ret[0].top,\r\n              },\r\n              container: null,\r\n              renderer: \"mini-native\",\r\n            });\r\n          },\r\n        });\r\n      });\r\n    // #endif\r\n\r\n    // #ifdef MP-WEIXIN\r\n    const query = uni.createSelectorQuery().in(this);\r\n    query\r\n      .select(\"#f6-canvas\")\r\n      .fields({\r\n        node: true,\r\n        size: true,\r\n      })\r\n      .exec((ret) => {\r\n        console.log(\"ret\", ret);\r\n        var canvas = ret[0].node;\r\n        canvas.width = this.$props.width * this.finalRatio;\r\n        canvas.height = this.$props.height * this.finalRatio;\r\n        this.rect = {\r\n          width: this.$props.width,\r\n          height: this.$props.height,\r\n          left: canvas._left,\r\n          top: canvas._top,\r\n        };\r\n        this.ctx = canvas.getContext(\"2d\");\r\n        this.$emit(\"onInit\", {\r\n          ctx: this.ctx,\r\n          rect: this.rect,\r\n          container: canvas,\r\n          renderer: \"mini-native\",\r\n        });\r\n      });\r\n\r\n    // #endif\r\n  },\r\n  methods: {\r\n    onTouch(e) {\r\n      const origin = e.mp;\r\n      let i = 0;\r\n      for (i = 0; i < origin.touches.length; i++) {\r\n        modifyEvent(origin.touches[i]);\r\n      }\r\n\r\n      for (i = 0; i < origin.changedTouches.length; i++) {\r\n        modifyEvent(origin.changedTouches[i]);\r\n      }\r\n      this.$emit(\"onTouchEvent\", origin);\r\n    },\r\n  },\r\n};\r\n\r\nfunction modifyEvent(touchEvent) {\r\n  touchEvent.clientX = touchEvent.x;\r\n  touchEvent.clientY = touchEvent.y;\r\n  touchEvent.pageX = touchEvent.x;\r\n  touchEvent.pageY = touchEvent.y;\r\n}\r\n</script>\r\n\r\n<style></style>\r\n"],"sourceRoot":""}